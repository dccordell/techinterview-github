@model GithubDashboard.Models.Event

@{
    ViewBag.Title = "Event Details";
}

<h2>Event Details</h2>

<div>
    <hr />
    <dl class="dl-horizontal">
        <h3>General</h3>
        <dt>Type:</dt>
        <dd>@Model.type</dd>

        <dt>ID:</dt>
        <dd>@Model.id</dd>

        <dt>User:</dt>
        <dd><a href = "http://github.com/@Model.actor.display_login">@Model.actor.display_login</a></dd>

        <dt>Public:</dt>
        <dd>@Html.DisplayFor(model => model._public)</dd>

        <dt>Created at:</dt>
        <dd>@Model.created_at</dd>
    </dl>

    <hr />

    <dl class="dl-horizontal">
        <dt>Repo:</dt>
        <dd><a href="http://github.com/@Model.repo.name">@Model.repo.name</a></dd>
    </dl>

    <hr />

        @if (Model.type == "ForkEvent")
        {
            <h3>Fork Info</h3>
            <dl class="dl-horizontal">
                <dt>Repo:</dt>
                <dd><a href=@Model.payload.forkee.html_url>@Model.payload.forkee.full_name</a></dd>

                <dt>Fork created at:</dt>
                <dd>@Model.payload.forkee.created_at</dd>

                <dt>Watchers:</dt>
                <dd>@Model.payload.forkee.watchers</dd>

                <dt>Fork has issues:</dt>
                <dd>@Model.payload.forkee.has_issues (@Model.payload.forkee.open_issues_count)</dd>
            </dl>
        } else if (Model.type == "PushEvent")
        {
            <h3>Push Details</h3>
            <dl class="dl-horizontal">
                <dt>Branch:</dt>
                <dd>@Model.payload._ref</dd>

                <dt>Commits:</dt>
                <dd>
                    <ul>
                    @foreach (var item in @Model.payload.commits)
                    {
                        <li>Author name: @item.author.name</li>
                        <li>Author email: @item.author.email</li>
                        <li>Commit message: @item.message</li>
                        <li>Commit URL: <a href=@item.url>@item.url</a></li>
                    }
                    </ul>
                    <hr />
                </dd>
            </dl>
        }
        else if (Model.type == "PullRequestEvent")
        {
            <h3>Pull Details</h3>
            <dl class="dl-horizontal">
                <dt>Title:</dt>
                <dd>@Model.payload.pull_request.title</dd>
                <dt>Request ID:</dt>
                <dd><a href=@Model.payload.pull_request.html_url>@Model.payload.pull_request.id</a></dd>
                <dt>Requested by:</dt>
                <dd><a href=@Model.payload.pull_request.user.html_url>@Model.payload.pull_request.user.login</a></dd>
                <dt>State:</dt>
                <dd>@Model.payload.pull_request.state</dd>
                <dt>Request body:</dt>
                <dd>@Model.payload.pull_request.body</dd>
                <dt>Created at:</dt>
                <dd>@Model.payload.pull_request.created_at</dd>
                <dt>From repo:</dt>
                <dd><a href=@Model.payload.pull_request.head.repo.html_url>@Model.payload.pull_request.head.repo.full_name</a></dd>
                <dt>To repo:</dt>
                <dd><a href=@Model.payload.pull_request._base.repo.html_url>@Model.payload.pull_request._base.repo.full_name</a></dd>
                <dt>Number of commits:</dt>
                <dd>@Model.payload.pull_request.commits</dd>
                <dt>Merged:</dt>
                <dd>@Model.payload.pull_request.merged</dd>
            </dl>
        }
        else if (Model.type == "PullRequestReviewCommentEvent")
        {
            <h3>Pull Request Review Comment Details</h3>
            <dl class="dl-horizontal">
                <dt>Comment user:</dt>
                <dd><a href=@Model.payload.comment.user.url>@Model.payload.comment.user.login</a></dd>
                <dt>Comment ID:</dt>
                <dd><a href=@Model.payload.comment.html_url>@Model.payload.comment.id</a></dd>
                <dt>Comment:</dt>
                <dd>@Model.payload.comment.body</dd>
                <dt>Created at:</dt>
                <dd>@Model.payload.comment.created_at</dd>

                <dt></dt><dd></dd>
                
                <dt>Pull request:</dt>
                <dd><a href=@Model.payload.pull_request.html_url>@Model.payload.pull_request.id</a></dd>
                <dt>Pull request state:</dt>
                <dd>@Model.payload.pull_request.state</dd>
                <dt>Pull request title:</dt>
                <dd>@Model.payload.pull_request.title</dd>
                <dt>Pull request description:</dt>
                <dd>@Model.payload.pull_request.body</dd>
                
            </dl>
        }
</div>
